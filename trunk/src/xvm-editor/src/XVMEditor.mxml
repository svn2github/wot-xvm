<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
	   xmlns:s="library://ns.adobe.com/flex/spark"
	   xmlns:mx="library://ns.adobe.com/flex/mx"
	   pageTitle="XVM Editor"
	   backgroundColor="0x808080"
	   minWidth="920" minHeight="520" maxWidth="920" maxHeight="520" width="920" height="520"
	   preinitialize="application_preinitializeHandler(event)"
	   xmlns:ns1="*"
	   xmlns:controls="it.sephiroth.controls.*"
	   xmlns:c="components.*"
	   xmlns:p="panels.*">
	<s:layout>
		<s:BasicLayout/>
	</s:layout>
	<fx:Script>
		import mx.events.FlexEvent;
		import mx.events.TreeEvent;

		import Const;

		include "Main.as";

		protected function application_preinitializeHandler(event:FlexEvent):void
		{
			// Initialize Singleton
			//ConfigHelper.instance;
		}

	</fx:Script>
	<fx:Style>
		@namespace s "library://ns.adobe.com/flex/spark";
		s|Panel {
			skinClass: ClassReference("skins.PanelSkin");
			dropShadowVisible: false;
		}
		s|ButtonBar {
			skinClass: ClassReference("skins.TileButtonBarSkin");
		}
	</fx:Style>
	<s:BorderContainer top="0" left="0" height="32" creationPolicy="all" width="920">
		<s:HGroup top="0" left="0" bottom="0" gap="4" verticalAlign="middle" paddingLeft="4" paddingRight="4" width="361">
			<s:Button label="Новый" click="onCreateNewConfigClick()"/>
			<s:Button label="Открыть" click="onLoadConfigClick()"/>
			<s:Button label="Сохранить" click="onSaveConfigClick()"/>
			<mx:PopUpMenuButton label="Дополнительно"/>
		</s:HGroup>
		<s:HGroup top="0" bottom="0" gap="4" verticalAlign="middle" paddingLeft="4" paddingRight="4" horizontalAlign="right" width="147" right="0">
			<s:Button label="En" width="40" enabled="false" toolTip="Not implemented yet"/>
			<s:Button label="Ru" width="40" enabled="false"/>
		</s:HGroup>
	</s:BorderContainer>
	<mx:TabNavigator id="tabs" creationPolicy="all" creationComplete="onCreateNewConfigClick()" top="32" left="0" width="920" height="488">
		<s:NavigatorContent label="Общие" width="100%" height="100%" id="pgCommon">
			<ns1:FlashComponentPlaceholder y="0" width="500" height="400" x="419"/>
			<s:Scroller x="0" y="0" width="420" height="100%">
				<s:VGroup x="0" y="0" width="100%" height="100%" gap="-1">
					<p:PDefinition/>
					<p:PBattle/>
					<p:PRating/>
				</s:VGroup>
			</s:Scroller>
		</s:NavigatorContent>
		<s:NavigatorContent label="Экран загрузки" width="100%" height="100%" id="pgBattleLoading">
			<ns1:FlashComponentPlaceholder y="0" width="500" height="400" x="419"/>
			<s:Scroller x="0" y="0" width="420" height="100%">
				<s:VGroup x="0" y="0" width="100%" height="100%" gap="-1">
					<p:PBattleLoading/>
					<p:PBattleLoadingIcons/>
					<p:PBattleLoadingText/>
				</s:VGroup>
			</s:Scroller>
		</s:NavigatorContent>
		<s:NavigatorContent label="Статистика по Tab" width="100%" height="100%" id="pgStatisticForm">
			<ns1:FlashComponentPlaceholder y="0" width="500" height="400" x="419"/>
			<s:Scroller x="0" y="0" width="420" height="100%">
				<s:VGroup x="0" y="0" width="100%" height="100%" gap="-1">
					<p:PStatisticForm/>
					<p:PStatisticFormIcons/>
					<p:PStatisticFormText/>
				</s:VGroup>
			</s:Scroller>
		</s:NavigatorContent>
		<s:NavigatorContent label="Панели игроков" width="100%" height="100%" id="pgPlayersPanel">
			<ns1:FlashComponentPlaceholder y="0" width="500" height="400" x="419"/>
			<s:Scroller x="0" y="0" width="420" height="100%">
				<s:VGroup x="0" y="0" width="100%" height="100%" gap="-1">
					<p:PPlayersPanel/>
					<p:PPlayersPanelIcons/>
					<p:PPlayersPanelMedium/>
					<p:PPlayersPanelMedium2/>
					<p:PPlayersPanelLarge/>
				</s:VGroup>
			</s:Scroller>
		</s:NavigatorContent>
		<s:NavigatorContent label="Маркеры" width="100%" height="100%" id="pgMarkers">
			<ns1:FlashComponentPlaceholder y="0" width="500" height="400" x="419"/>
			<s:Scroller x="0" y="0" width="420" height="100%">
				<s:VGroup x="0" y="0" width="100%" height="100%" gap="-1">
					<s:HGroup left="10" right="10" height="145">
						<s:ButtonBar left="10" dataProvider="{vsMarkers}"/>
						<s:BorderContainer width="245" height="100" borderVisible="false">
							<s:ToggleButton x="10" y="10" width="110" label="Союзник"/>
							<s:ToggleButton x="125" y="10" width="110" label="Противник"/>
							<s:ToggleButton x="10" y="40" width="110" label="Живой"/>
							<s:ToggleButton x="125" y="40" width="110" label="Мертвый"/>
							<s:ToggleButton x="10" y="70" width="110" label="Номальный"/>
							<s:ToggleButton x="125" y="70" width="110" label="Расширенный"/>
						</s:BorderContainer>
					</s:HGroup>
					<mx:ViewStack id="vsMarkers" width="100%" height="100%">
						<s:NavigatorContent label="Класс танка" width="100%" height="100%">
							<p:MVehicleIcon/>
						</s:NavigatorContent>
						<s:NavigatorContent id="hb" label="Уровень здоровья" width="100%" height="100%">
							<p:MHealthBar/>
						</s:NavigatorContent>
						<s:NavigatorContent label="Текущий урон" width="100%" height="100%">
							<p:MDamageText/>
							<p:MFont/>
							<p:MShadow/>
						</s:NavigatorContent>
						<s:NavigatorContent label="Контур танка" width="100%" height="100%">
							<p:MContourIcon/>
						</s:NavigatorContent>
						<s:NavigatorContent label="Уровень танка" width="100%" height="100%">
							<p:MLevelIcon/>
						</s:NavigatorContent>
						<s:NavigatorContent label="Маркер действия" width="100%" height="100%">
							<p:MActionMarker/>
						</s:NavigatorContent>
						<s:NavigatorContent label="Текстовые поля" width="100%" height="100%">
							<p:MTextFields/>
						</s:NavigatorContent>
					</mx:ViewStack>
				</s:VGroup>
			</s:Scroller>
		</s:NavigatorContent>
		<s:NavigatorContent label="Цвета" width="100%" height="100%" id="pgColors">
			<ns1:FlashComponentPlaceholder y="0" width="500" height="400" x="419"/>
			<s:Scroller x="0" y="0" width="420" height="100%">
				<s:VGroup x="0" y="0" width="100%" height="100%" gap="-1">
					<s:Panel width="100%" height="100" title="Системные цвета">
					</s:Panel>
					<s:Panel width="100%" height="100" title="Динамический цвет по оставшемуся здоровью">
					</s:Panel>
					<s:Panel width="100%" height="100" title="Динамический цвет по проценту оставшегося здоровья">
					</s:Panel>
					<s:Panel width="100%" height="100" title="Динамический цвет по эффективности (только в xvm-full)">
					</s:Panel>
					<s:Panel width="100%" height="100" title="Динамический цвет по проценту побед (только в xvm-full)">
					</s:Panel>
					<s:Panel width="100%" height="100" title="Динамический цвет по количеству кило-боев (только в xvm-full)">
					</s:Panel>
				</s:VGroup>
			</s:Scroller>
<!--
    "system": {
      "ally_alive_normal": "0x96FF00",
      "ally_alive_blind": "0x96FF00",
      "ally_dead_normal": "0x009900",
      "ally_dead_blind": "0x009900",
      "ally_blowedup_normal": "0x007700",
      "ally_blowedup_blind": "0x007700",
      "squadman_alive_normal": "0xFFB964",
      "squadman_alive_blind": "0xFFFF00",
      "squadman_dead_normal": "0xCA7000",
      "squadman_dead_blind": "0xAAAA00",
      "squadman_blowedup_normal": "0xA45A00",
      "squadman_blowedup_blind": "0x888800",
      "teamKiller_alive_normal": "0x00EAFF",
      "teamKiller_alive_blind": "0x00EAFF",
      "teamKiller_dead_normal": "0x097783",
      "teamKiller_dead_blind": "0x097783",
      "teamKiller_blowedup_normal": "0x096A75",
      "teamKiller_blowedup_blind": "0x096A75",
      "enemy_alive_normal": "0xF50800",
      "enemy_alive_blind": "0x8379FE",
      "enemy_dead_normal": "0x840500",
      "enemy_dead_blind": "0x47407A",
      "enemy_blowedup_normal": "0x5A0401",
      "enemy_blowedup_blind": "0x3B365F"
    },
    "hp": [
      { "value": 200,  "color": "0xDD0000" },
      { "value": 400,  "color": "0xDD3333" },
      { "value": 1000, "color": "0xFFCC33" },
      { "value": 9999, "color": "0xFFFFFF" }
    ],
    "hp_ratio": [
      { "value": 10,  "color": "0xDD0000" },
      { "value": 25,  "color": "0xDD3333" },
      { "value": 50,  "color": "0xFFCC33" },
      { "value": 101, "color": "0xFFFFFF" }
    ],
    "eff": [
      { "value": 600,  "color": "0xDD0000" },
      { "value": 900,  "color": "0xDD3333" },
      { "value": 1200, "color": "0xFFCC33" },
      { "value": 1500, "color": "0x99FF33" },
      { "value": 1800, "color": "0x33FF33" },
      { "value": 9999, "color": "0xCC66CC" }
    ],
    "rating": [
      { "value": 42,  "color": "0xDD0000" },
      { "value": 46,  "color": "0xDD3333" },
      { "value": 49,  "color": "0xDDDD33" },
      { "value": 51,  "color": "0xFFCC33" },
      { "value": 53,  "color": "0x99FF33" },
      { "value": 57,  "color": "0x33FF33" },
      { "value": 101, "color": "0xCC66CC" }
    ],
    "kb": [
      { "value": 1,   "color": "0xDD0000" },
      { "value": 3,   "color": "0xDD3333" },
      { "value": 5,   "color": "0xFFCC33" },
      { "value": 8,   "color": "0x99FF33" },
      { "value": 12,  "color": "0x33FF33" },
      { "value": 999, "color": "0xCC66CC" }
    ]
-->
		</s:NavigatorContent>
		<s:NavigatorContent label="Прозрачность" width="100%" height="100%" id="pgTransparency">
			<ns1:FlashComponentPlaceholder y="0" width="500" height="400" x="419"/>
			<s:Scroller x="0" y="0" width="420" height="100%">
				<s:VGroup x="0" y="0" width="100%" height="100%" gap="-1">
					<s:Panel width="100%" height="100" title="Динамическая прозрачность по оставшемуся здоровью">
					</s:Panel>
					<s:Panel width="100%" height="100" title="Динамическая прозрачность по проценту оставшегося здоровья">
					</s:Panel>
					<s:Panel width="100%" height="100" title="Динамическая прозрачность по эффективности (xvm-full)">
					</s:Panel>
					<s:Panel width="100%" height="100" title="Динамическая прозрачность по проценту побед (xvm-full)">
					</s:Panel>
					<s:Panel width="100%" height="100" title="Динамическая прозрачность по количеству кило-боев (xvm-full)">
					</s:Panel>
				</s:VGroup>
			</s:Scroller>
<!--
  "alpha": {
    "hp": [
      { "value": 200,  "alpha": 100 },
      { "value": 400,  "alpha": 80 },
      { "value": 1000, "alpha": 60 },
      { "value": 9999, "alpha": 40 }
    ],
    "hp_ratio": [
      { "value": 10,  "alpha": 100 },
      { "value": 25,  "alpha": 80 },
      { "value": 50,  "alpha": 60 },
      { "value": 101, "alpha": 40 }
    ],
    "eff": [
      { "value": 900,  "alpha": 100 },
      { "value": 1200, "alpha": 100 },
      { "value": 9999, "alpha": 100 }
    ],
    "rating": [
      { "value": 49,  "alpha": 100 },
      { "value": 53,  "alpha": 100 },
      { "value": 101, "alpha": 100 }
    ],
    "kb": [
      { "value": 2,   "alpha": 100 },
      { "value": 10,  "alpha": 100 },
      { "value": 999, "alpha": 100 }
    ]
  },
-->
		</s:NavigatorContent>
		<s:NavigatorContent label="Наборы иконок" width="100%" height="100%" id="pgIconset">
			<ns1:FlashComponentPlaceholder y="0" width="500" height="400" x="419"/>
			<s:Scroller x="0" y="0" width="420" height="100%">
				<s:VGroup x="0" y="0" width="100%" height="100%" gap="-1">
					<p:PIconSet/>
				</s:VGroup>
			</s:Scroller>
		</s:NavigatorContent>
		<s:NavigatorContent label="Игроки/кланы" width="100%" height="100%" id="pgPlayers">
			<ns1:FlashComponentPlaceholder y="0" width="500" height="400" x="419"/>
			<s:Scroller x="0" y="0" width="420" height="100%">
				<s:VGroup x="0" y="0" width="100%" height="100%" gap="-1">
					<s:Panel width="100%" height="100%" title="Иконки игроков/кланов">
					</s:Panel>
				</s:VGroup>
			</s:Scroller>
		</s:NavigatorContent>
	</mx:TabNavigator>
</s:Application>
